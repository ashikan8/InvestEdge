<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>InvestEdge • Live Max-Sharpe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Chart.js + Luxon adapter for time scale -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.5.0/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js"></script>

  <style>
    :root{
      --bg-0:#060909; --bg-1:#071210; --bg-2:#071a13;
      --green:#27e98a; --green-2:#13c676;
      --text:#e7f1ee; --muted:#8ea6a0;
      --border:#13201c; --ring: rgba(39,233,138,.5);
      --radius:14px;
    }
    body{
      margin:0; color:var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      min-height:100svh;
      background:
        radial-gradient(1000px 700px at 15% -10%, rgba(39,233,138,.12), transparent 60%),
        radial-gradient(900px 600px at 85% -5%, rgba(39,233,138,.08), transparent 65%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1) 40%, var(--bg-2));
      background-attachment: fixed;
      overflow-y: overlay;
    }
    body::after{
      content:""; position:fixed; inset:0; pointer-events:none;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.03"/></svg>');
      mix-blend-mode: soft-light;
    }

    .container{ max-width:1120px; margin:0 auto; padding:0 20px; }
    nav{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(6,9,9,.85), rgba(6,9,9,.55));
      border-bottom:1px solid var(--border);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; padding:12px 20px; max-width:1120px; margin:0 auto;
    }
    .brand{ display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text);}
    .mark{
      width:38px;height:38px;border-radius:10px; display:grid;place-items:center;
      background: linear-gradient(135deg, rgba(39,233,138,.18), rgba(39,233,138,.05));
      border:1px solid var(--border);
      box-shadow: 0 10px 30px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.04);
      font-family: "JetBrains Mono", monospace; color:var(--green); font-weight:700;
    }
    .links a{ color:var(--muted); text-decoration:none; padding:8px 10px; border-radius:10px; font-family:"Space Grotesk", Inter; font-weight:600; }
    .links a:hover{ color:var(--green); background: rgba(39,233,138,.1); }

    section{ padding:48px 0; }
    .card{
      background: rgba(255,255,255,.03);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: 0 8px 28px rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
    }

    .hero{ padding:72px 0 24px; text-align:center; }
    .hero h1{
      margin:0;
      font: 800 clamp(32px,6vw,64px)/1.05 "Space Grotesk", Inter;
      letter-spacing:.3px; color:var(--green);
      opacity:1; transform: translateY(0); transition: opacity .4s ease, transform .4s ease;
    }
    .hero p{ max-width:800px; margin:14px auto 0; color:var(--muted); font-size:1.05rem; }
    .fade-out{ opacity:0; transform: translateY(-12px); }

    .grid{ display:grid; gap:12px; grid-template-columns: 1.3fr .7fr; }
    .grid-2{ display:grid; gap:12px; grid-template-columns: 1fr 1fr; }
    @media (max-width:860px){ .grid,.grid-2{ grid-template-columns: 1fr; } }

    label{ display:block; margin:2px 0 6px 6px; color:var(--muted); font-size:.9rem; }
    input, select, button{
      width:100%; padding:12px 14px; border-radius:12px;
      background:#0d1514; color:var(--text);
      border:1px solid var(--border); outline:none;
      transition: box-shadow .15s ease, border-color .15s ease, transform .06s ease;
    }
    input::placeholder{ color:#7f9690; }
    input:focus, select:focus{ border-color: var(--green); box-shadow:0 0 0 4px var(--ring); }
    .actions{ display:flex; gap:12px; align-items:center; margin-top:8px; }
    .btn{
      border:none; cursor:pointer; font-weight:700; letter-spacing:.2px;
      color:#04140d; background: linear-gradient(180deg, var(--green), var(--green-2));
      box-shadow: 0 12px 24px rgba(39,233,138,.20);
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0); box-shadow:none; }

    .status{ margin-top:10px; color:var(--muted); font-size:.95rem; }
    .tabs{ margin-top:18px; display:flex; gap:8px; flex-wrap:wrap;}
    .tab{
      background:#0d1514; border:1px solid var(--border); color:var(--text);
      padding:10px 14px; border-radius:10px; cursor:pointer; user-select:none;
      font-weight:600; font-family:"Space Grotesk", Inter;
    }
    .tab.active{ background: rgba(39,233,138,.12); border-color: var(--
green); color:var(--green); }
      .table-results {
  width: 100%;
  border-collapse: collapse;
  margin-top: 18px;
  font-family: "Space Grotesk", Inter, Arial, sans-serif;
  background: #101a19;
  color: var(--text, #eaeaea);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(39,233,138,.10);
}
.table-results th, .table-results td {
  padding: 12px 16px;
  text-align: left;
}
.table-results th {
  background: #16211f;
  color: #27e98a;
  font-weight: 600;
  font-size: 1rem;
}
.table-results tr {
  border-bottom: 1px solid var(--border, #23302e);
}
.table-results tr:last-child {
  border-bottom: none;
}
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner container">
      <a href="#" class="brand">
        <div class="mark">IE</div>
        <span>InvestEdge</span>
      </a>
      <div class="links">
        <a href="#">Home</a>
        <a href="#" id="calculatorTab">Calculator</a>
        <a href="#" onclick="document.getElementById('aboutModal').style.display='flex';return false;">About</a>
        <a href="#" onclick="document.getElementById('contactModal').style.display='flex';return false;">Contact</a>
      </div>
    </div>
  </nav>

  <div class="hero container">
    <h1 class="fade-out">Maximize Your Investments with Our Sharpe Ratio Tool</h1>
    <p>Use our live calculator to find the best asset allocation for your portfolio.</p>
    <div class="actions">
      <button class="btn" id="getStartedBtn">Get Started</button>
    </div>
  </div>

  <section id="calculatorSection" style="display:none;">
    <div class="container">
      <div class="card">
        <h2>Portfolio Optimizer</h2>
        <label for="tickers">Enter Tickers (comma separated):</label>
        <input type="text" id="tickers" placeholder="AAPL, MSFT, GOOG" />
        <label for="portfolioValue">Portfolio Value ($):</label>
        <input type="number" id="portfolioValue" value="100000" step="1000" />
        <div class="actions">
          <button class="btn" id="optimizeBtn">Optimize</button>
        </div>
        <div class="status" id="statusMessage"></div>
        <div id="allocationResults"></div>
      </div>
    </div>
  </section>

  <div id="aboutModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(16,26,25,0.98); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:#101a19; color:#eaeaea; font-family:'Space Grotesk',Inter,Arial,sans-serif; max-width:600px; margin:auto; padding:32px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(39,233,138,.12); position:relative;">
    <button onclick="document.getElementById('aboutModal').style.display='none'" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:1.5rem;color:#27e98a;cursor:pointer;">&times;</button>
    <h2 style="color:#27e98a; margin-bottom:18px;">About InvestEdge</h2>
    <p style="font-size:1.08em;line-height:1.6;">
      InvestEdge is a research-driven portfolio tool built by three high-school students at the intersection of finance and computer science. Our platform uses a Max-Sharpe (risk-adjusted return) optimization framework—supported by back-testing and transparent data—to propose diversified portfolio weights and visualize risk/return trade-offs. Our goal is to help users make more informed investment decisions through clear, accessible analytics. InvestEdge is an educational resource and does not provide financial advice.
    </p>
  </div>
</div>

<div id="contactModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(16,26,25,0.98); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:#101a19; color:#eaeaea; font-family:'Space Grotesk',Inter,Arial,sans-serif; max-width:600px; margin:auto; padding:32px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(39,233,138,.12); position:relative;">
    <button onclick="document.getElementById('contactModal').style.display='none'" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:1.5rem;color:#27e98a;cursor:pointer;">&times;</button>
    <h2 style="color:#27e98a; margin-bottom:8px;">Contact Us</h2>
    <div style="color:var(--muted); margin-bottom:18px; font-size:1.08em;">
      We would love to hear your advice! Feel free to reach out about any questions or suggestions to make InvestEdge better!
    </div>
    <form id="contactForm" style="display:flex;flex-direction:column;gap:14px;">
      <input type="text" id="contactName" placeholder="Your Name" required style="font-family:'Space Grotesk',Inter,Arial,sans-serif;">
      <input type="email" id="contactEmail" placeholder="Your Email" required style="font-family:'Space Grotesk',Inter,Arial,sans-serif;">
      <textarea id="contactMessage" rows="5" placeholder="Your Message" required style="font-family:'Space Grotesk',Inter,Arial,sans-serif;"></textarea>
      <button type="submit" class="btn" style="width:auto;align-self:flex-end;">Send</button>
      <div id="contactStatus" style="margin-top:8px;font-size:0.97em;"></div>
    </form>
  </div>
</div>

  <script>
    // Show calculator when Get Started or Calculator tab is clicked
    document.getElementById('getStartedBtn').onclick = () => {
      document.getElementById('calculatorSection').style.display = 'block';
      window.scrollTo(0, document.getElementById('calculatorSection').offsetTop);
    };
    document.getElementById('calculatorTab').onclick = (e) => {
      e.preventDefault();
      document.getElementById('calculatorSection').style.display = 'block';
      window.scrollTo(0, document.getElementById('calculatorSection').offsetTop);
    };

    // Optimize button handler
    document.getElementById('optimizeBtn').onclick = async () => {
      const tickers = document.getElementById('tickers').value;
      const portfolioValue = document.getElementById('portfolioValue').value;
      document.getElementById('statusMessage').textContent = "Optimizing...";
      document.getElementById('allocationResults').innerHTML = "";
      try {
        const res = await fetch('/optimize', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({tickers, portfolio_value: portfolioValue})
        });
        if (!res.ok) throw new Error("Optimization failed");
        const data = await res.json();
        document.getElementById('statusMessage').textContent = "Optimization complete!";
        let html = `<h3 style="margin-bottom:10px;">Suggested Allocation</h3>
  <table class="table-results">
    <tr>
      <th>Ticker</th>
      <th>Weight (%)</th>
      <th>Shares to Buy</th>
      <th>Last Price ($)</th>
      <th>Dollar Allocation ($)</th>
    </tr>`;
        for (const t in data.weights) {
          const weight = data.weights[t];
          const shares = data.share_targets[t];
          const price = data.last_prices[t];
          const dollar = (weight * portfolioValue).toFixed(2);
          html += `<tr>
            <td>${t}</td>
            <td>${(weight*100).toFixed(2)}</td>
            <td>${shares}</td>
            <td>$${price.toFixed(2)}</td>
            <td>$${dollar}</td>
          </tr>`;
        }
        html += `</table>
          <div style="margin-top:10px;font-size:0.95em;color:#27e98a;">
            <b>Data as of:</b> ${data.timestamp} &nbsp; <b>Interval:</b> ${data.interval}
          </div>`;
        document.getElementById('allocationResults').innerHTML = html;
      } catch (err) {
        document.getElementById('statusMessage').textContent = "Error: " + err.message;
      }
    };

    // Contact form handler
    document.getElementById('contactForm').onsubmit = function(e) {
      e.preventDefault();
      const name = document.getElementById('contactName').value.trim();
      const email = document.getElementById('contactEmail').value.trim();
      const message = document.getElementById('contactMessage').value.trim();
      const status = document.getElementById('contactStatus');
      status.textContent = "Redirecting to your email client...";
      window.location.href = `mailto:investedge8@gmail.com?subject=Contact from ${encodeURIComponent(name)}&body=Email: ${encodeURIComponent(email)}%0A%0A${encodeURIComponent(message)}`;
    };
  </script>
</body>
</html>
